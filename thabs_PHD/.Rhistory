table(firat)
table(final_dataset$outcome)
socio_demographics <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0))
table(socio_demographics$outcome, socio_demographics$outcome_advanced_HIV)
final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(gender = as.factor(Gender),
ethnicity = as.factor(Ethnicity)) %>%
dplyr::select(`Age at enrolment`, gender, ethnicity, outcome_advanced_HIV) %>%
tbl_uvregression(
outcome_advanced_HIV[c('Age at enrolment', 'gender', 'ethnicity')],
method = glm,
y = response,
method.args = list(family = binomial),
exponentiate = TRUE
)
socio_demographics <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(gender = as.factor(Gender),
ethnicity = as.factor(Ethnicity)) %>%
dplyr::select(`Age at enrolment`, gender, ethnicity, outcome_advanced_HIV) %>%
tbl_uvregression(
outcome_advanced_HIV[c('outcome_advanced_HIV', 'Age at enrolment', 'gender', 'ethnicity')],
method = glm,
y = response,
method.args = list(family = binomial),
exponentiate = TRUE
)
socio_demographics <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(gender = as.factor(Gender),
ethnicity = as.factor(Ethnicity)) %>%
dplyr::select(`Age at enrolment`, gender, ethnicity, outcome_advanced_HIV) %>%
tbl_uvregression(
outcome_advanced_HIV[c('outcome_advanced_HIV', 'Age at enrolment', 'gender', 'ethnicity')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
tbl_uvregression(
outcome_advanced_HIV[c('outcome_advanced_HIV', 'Age at enrolment', 'gender', 'ethnicity')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
socio_demographics <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(gender = as.factor(Gender),
ethnicity = as.factor(Ethnicity)) %>%
dplyr::select(`Age at enrolment`, gender, ethnicity, outcome_advanced_HIV)
socio_demographics <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(gender = as.factor(Gender),
ethnicity = as.factor(Ethnicity)) %>%
dplyr::select(`Age at enrolment`, gender, ethnicity, outcome_advanced_HIV) %>%
tbl_uvregression(
socio_demographics[c('outcome_advanced_HIV', 'Age at enrolment', 'gender', 'ethnicity')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
tbl_uvregression(
socio_demographics[c('outcome_advanced_HIV', 'Age at enrolment', 'gender', 'ethnicity')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(cache=TRUE)
knitr::opts_chunk$set(fig.pos = 'H')
knitr::opts_chunk$set(results = 'asis')
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(message = FALSE)
library(tidyverse)
library(magrittr)
library(knitr)
library(kableExtra)
library(tinytex)
library(gmodels)
library(readxl)
# library(MASS)
library(gtsummary)
final_dataset <- read_csv("final_dataset.csv", show_col_types = F) %>%
mutate(outcome = ifelse(`Random cortisol result` < 500 & (`Synacthen: 30 minute cortisol result`< 550 & `ACTH result`> 13.9), 1, 0)) %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
# dat <- final_dataset %>%
# select(`Hospital folder number`,`Random cortisol result`, `ACTH sample drawn`, `ACTH result`, `Synacthen: 0 minute cortisol result`, `Synacthen: 30 minute cortisol result`, outcome)
# write.csv(dat, 'outcome_dat.csv')
final_dataset <- read_csv("final_dataset.csv", show_col_types = F) %>%
mutate(outcome = ifelse(`Random cortisol result` < 500 & (`Synacthen: 30 minute cortisol result`< 550 & `ACTH result`> 13.9), 1, 0)) #%>%
# dat <- final_dataset %>%
# select(`Hospital folder number`,`Random cortisol result`, `ACTH sample drawn`, `ACTH result`, `Synacthen: 0 minute cortisol result`, `Synacthen: 30 minute cortisol result`, outcome)
# write.csv(dat, 'outcome_dat.csv')
socio_demographics2 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(gender = as.factor(Gender),
ethnicity = as.factor(Ethnicity)) %>%
dplyr::select(`Age at enrolment`, gender, ethnicity, outcome_advanced_HIV) %>%
tbl_uvregression(
socio_demographics[c('outcome_advanced_HIV', 'Age at enrolment', 'gender', 'ethnicity')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
socio_demographics2 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(gender = as.factor(Gender),
ethnicity = as.factor(Ethnicity)) %>%
dplyr::select(`Age at enrolment`, gender, ethnicity, outcome_advanced_HIV) %>%
tbl_uvregression(
socio_demographics[c('outcome_advanced_HIV', 'Age at enrolment', 'gender', 'ethnicity')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
socio_demographics2 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(gender = as.factor(Gender),
ethnicity = as.factor(Ethnicity)) %>%
dplyr::select(`Age at enrolment`, gender, ethnicity, outcome_advanced_HIV) %>%
tbl_uvregression(
socio_demographics2[c('outcome_advanced_HIV', 'Age at enrolment', 'gender', 'ethnicity')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
socio_demographics2 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(gender = as.factor(Gender),
ethnicity = as.factor(Ethnicity)) %>%
dplyr::select(`Age at enrolment`, gender, ethnicity, outcome_advanced_HIV)
final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(gender = as.factor(Gender),
ethnicity = as.factor(Ethnicity)) %>%
dplyr::select(`Age at enrolment`, gender, ethnicity, outcome_advanced_HIV) %>%
tbl_uvregression(
socio_demographics2[c('outcome_advanced_HIV', 'Age at enrolment', 'gender', 'ethnicity')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
socio_demographics2 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(gender = as.factor(Gender),
ethnicity = as.factor(Ethnicity)) %>%
dplyr::select(`Age at enrolment`, gender, ethnicity, outcome_advanced_HIV) %>%
tbl_uvregression(
socio_demographics2[c('outcome_advanced_HIV', 'Age at enrolment')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
socio_demographics2 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(gender = as.factor(Gender),
ethnicity = as.factor(Ethnicity)) %>%
dplyr::select(outcome_advanced_HIV, `Age at enrolment`, gender, ethnicity) %>%
tbl_uvregression(
socio_demographics2[c('outcome_advanced_HIV', 'Age at enrolment', 'gender', 'ethnicity')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
tbl_uvregression(
socio_demographics2[c('outcome_advanced_HIV', 'Age at enrolment', 'gender', 'ethnicity')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
socio_demographics2 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(gender = as.factor(Gender),
ethnicity = as.factor(Ethnicity)) %>%
dplyr::select(outcome_advanced_HIV, `Age at enrolment`, gender, ethnicity) %>%
tbl_uvregression(
c('outcome_advanced_HIV', 'Age at enrolment', 'gender', 'ethnicity'),
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
tbl_uvregression(
socio_demographics2[c('outcome_advanced_HIV', 'Age at enrolment', 'gender', 'ethnicity')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
clinical2 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(`days since employment` = as.Date(`Date of enrolment in study`)- as.Date(`Last Employment date`)) %>%
mutate(`HIV-positive, confirmed on ELISA` = as.factor(`HIV-positive, confirmed on ELISA`),
`Opportunistic infection present` = as.factor(`Opportunistic infection present`),
`Oral or inhaled steroids in the last three months` = as.factor(`Oral or inhaled steroids in the last three months`)
) %>%
dplyr::select(`HIV-positive, confirmed on ELISA`, `Total CD4 count...9`, `CD4 < 100`, `Opportunistic infection present`, `Oral or inhaled steroids in the last three months`, `days since employment`, `Duration of current illness`, outcome_advanced_HIV)
tbl_uvregression(
clinical2[c('HIV-positive, confirmed on ELISA', 'Total CD4 count...9', 'CD4 < 100', 'Opportunistic infection present', 'Oral or inhaled steroids in the last three months', 'days since employment', 'Duration of current illness', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
tbl_uvregression(
clinical2[c('outcome_advanced_HIV', 'HIV-positive, confirmed on ELISA', 'Total CD4 count...9', 'CD4 < 100', 'Opportunistic infection present', 'Oral or inhaled steroids in the last three months', 'days since employment', 'Duration of current illness' )],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
str(clinical2)
clinical2 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(`days since employment` = as.numeric(as.Date(`Date of enrolment in study`)- as.Date(`Last Employment date`))) %>%
mutate(`HIV-positive, confirmed on ELISA` = as.factor(`HIV-positive, confirmed on ELISA`),
`Opportunistic infection present` = as.factor(`Opportunistic infection present`),
`Oral or inhaled steroids in the last three months` = as.factor(`Oral or inhaled steroids in the last three months`)
) %>%
dplyr::select(`HIV-positive, confirmed on ELISA`, `Total CD4 count...9`, `CD4 < 100`, `Opportunistic infection present`, `Oral or inhaled steroids in the last three months`, `days since employment`, `Duration of current illness`, outcome_advanced_HIV)
str(clinical2)
tbl_uvregression(
clinical2[c('outcome_advanced_HIV', 'HIV-positive, confirmed on ELISA', 'Total CD4 count...9', 'CD4 < 100', 'Opportunistic infection present', 'Oral or inhaled steroids in the last three months', 'days since employment', 'Duration of current illness' )],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
glm(formula = outcome_advanced_HIV ~ `HIV-positive, confirmed on ELISA`,
data = clinical2, family = binomial)
View(clinical2)
tbl_uvregression(
clinical2[c(#'outcome_advanced_HIV', 'HIV-positive, confirmed on ELISA',
'Total CD4 count...9', 'CD4 < 100', 'Opportunistic infection present', 'Oral or inhaled steroids in the last three months', 'days since employment', 'Duration of current illness' )],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
tbl_uvregression(
clinical2[c(#'outcome_advanced_HIV', 'HIV-positive, confirmed on ELISA',
#'Total CD4 count...9',
'CD4 < 100', 'Opportunistic infection present', 'Oral or inhaled steroids in the last three months', 'days since employment', 'Duration of current illness' )],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
tbl_uvregression(
clinical2[c(#'outcome_advanced_HIV', 'HIV-positive, confirmed on ELISA',
#'Total CD4 count...9',
'Opportunistic infection present', 'Oral or inhaled steroids in the last three months', 'days since employment', 'Duration of current illness' )],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
tbl_uvregression(
clinical2[c(#'outcome_advanced_HIV', 'HIV-positive, confirmed on ELISA',
#'Total CD4 count...9',
'Oral or inhaled steroids in the last three months', 'days since employment', 'Duration of current illness' )],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
tbl_uvregression(
clinical2[c(#'outcome_advanced_HIV', 'HIV-positive, confirmed on ELISA',
#'Total CD4 count...9',
# 'Opportunistic infection present',
'Oral or inhaled steroids in the last three months', 'days since employment', 'Duration of current illness' )],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
tbl_uvregression(
clinical2[c(#'outcome_advanced_HIV', 'HIV-positive, confirmed on ELISA',
#'Total CD4 count...9',
# 'Opportunistic infection present',
# 'Oral or inhaled steroids in the last three months',
'days since employment', 'Duration of current illness' )],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
signs_table12 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(#`log10 viral load` = log(`HIV viral load`, 10),
Hypotension = as.factor(Hypotension),
Weakness = as.factor(Weakness),
Tiredness = as.factor(Tiredness),
`Poor appetite` = as.factor(`Poor appetite`),
`Weight loss` = as.factor(`Weight loss`),
`Increased pigmentation of the skin` = as.factor(`Increased pigmentation of the skin`),
Nausea = as.factor(Nausea)
) %>%
dplyr::select(`BP (systolic)`, `BP (diastolic)`, `Heart rate`, Hypotension, Weakness, Tiredness, `Poor appetite`, `Weight loss`, `Increased pigmentation of the skin`, Nausea, outcome_advanced_HIV)
tbl_uvregression(
signs_table12[c('BP (systolic)', 'BP (diastolic)', 'Heart rate', 'Hypotension', 'Weakness', 'Tiredness', 'Poor appetite', 'Weight loss', 'Increased pigmentation of the skin', 'Nausea', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
signs_table22 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(
Vomiting = as.factor(Vomiting),
`Liking for salt` = as.factor(`Liking for salt`),
Hypoglycaemia = as.factor(Hypoglycaemia),
`Loss of consciousness` = as.factor(`Loss of consciousness`),
Diarrhoea = as.factor(Diarrhoea),
Dizziness = as.factor(Dizziness),
Shock = as.factor(Shock),
Anorexia = as.factor(Anorexia),
`Loss of axillary and pubic hair, if female` = as.factor(`Loss of axillary and pubic hair, if female`),
`Any postural drop in blood pressure` = as.factor(`Any postural drop in blood pressure`)
) %>%
dplyr::select(Vomiting, `Liking for salt`, Hypoglycaemia, `Loss of consciousness`, Diarrhoea, Dizziness, Shock, Anorexia, `Loss of axillary and pubic hair, if female`, `Any postural drop in blood pressure`, outcome_advanced_HIV)
tbl_uvregression(
signs_table22[c('Vomiting', 'Liking for salt', 'Hypoglycaemia', 'Loss of consciousness', 'Diarrhoea', 'Dizziness', 'Shock', 'Anorexia', 'Loss of axillary and pubic hair', 'if female`, `Any postural drop in blood pressure', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
tbl_uvregression(
signs_table22[c('Vomiting', 'Liking for salt', 'Hypoglycaemia', 'Loss of consciousness', 'Diarrhoea', 'Dizziness', 'Shock', 'Anorexia', 'Loss of axillary and pubic hair, if female', 'Any postural drop in blood pressure', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
signs_table32 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(`log10 viral load` = log(`HIV viral load`, 10),
`Presence of anaemia` = as.factor(`Presence of anaemia`),
`Or, HIV viral load = LDL (choice=LDL)` = as.factor(`Or, HIV viral load = LDL (choice=LDL)`),
`Current tuberculosis` = as.factor(`Current tuberculosis`),
`Past tuberculosis` = as.factor(`Past tuberculosis`),
`Electrolytes available` = as.factor(`Electrolytes available`)) %>%
dplyr::select(`Presence of anaemia`, `Total CD4 count...89`, `log10 viral load`, `Or, HIV viral load = LDL (choice=LDL)`, `Current tuberculosis`, `Past tuberculosis`, `Electrolytes available`, Sodium, Potassium, Urea, outcome_advanced_HIV) %>%
tbl_uvregression(
signs_table32[c('Presence of anaemia', 'Total CD4 count...89', 'log10 viral load', 'Or, HIV viral load = LDL (choice=LDL)', 'Current tuberculosis', 'Past tuberculosis', 'Electrolytes available', 'Sodium', 'Potassium', 'Urea', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
signs_table32 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(`log10 viral load` = log(`HIV viral load`, 10),
`Presence of anaemia` = as.factor(`Presence of anaemia`),
`Or, HIV viral load = LDL (choice=LDL)` = as.factor(`Or, HIV viral load = LDL (choice=LDL)`),
`Current tuberculosis` = as.factor(`Current tuberculosis`),
`Past tuberculosis` = as.factor(`Past tuberculosis`),
`Electrolytes available` = as.factor(`Electrolytes available`)) %>%
dplyr::select(`Presence of anaemia`, `Total CD4 count...89`, `log10 viral load`, `Or, HIV viral load = LDL (choice=LDL)`, `Current tuberculosis`, `Past tuberculosis`, `Electrolytes available`, Sodium, Potassium, Urea, outcome_advanced_HIV)
tbl_uvregression(
signs_table32[c('Presence of anaemia', 'Total CD4 count...89', 'log10 viral load', 'Or, HIV viral load = LDL (choice=LDL)', 'Current tuberculosis', 'Past tuberculosis', 'Electrolytes available', 'Sodium', 'Potassium', 'Urea', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
View(signs_table32)
tbl_uvregression(
signs_table32[c('Presence of anaemia', 'Total CD4 count...89', 'log10 viral load', 'Or, HIV viral load = LDL (choice=LDL)', 'Current tuberculosis', 'Past tuberculosis', 'Sodium', 'Potassium', 'Urea', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
signs_table32 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(`log10 viral load` = log(`HIV viral load`, 10),
`Presence of anaemia` = as.factor(`Presence of anaemia`),
`Or, HIV viral load = LDL (choice=LDL)` = as.factor(`Or, HIV viral load = LDL (choice=LDL)`),
`Current tuberculosis` = as.factor(`Current tuberculosis`),
`Past tuberculosis` = as.factor(`Past tuberculosis`),
`Electrolytes available` = as.factor(`Electrolytes available`),
`Total CD4 count` = `Total CD4 count...89`) %>%
dplyr::select(`Presence of anaemia`, `Total CD4 count`, `log10 viral load`, `Or, HIV viral load = LDL (choice=LDL)`, `Current tuberculosis`, `Past tuberculosis`, `Electrolytes available`, Sodium, Potassium, Urea, outcome_advanced_HIV)
tbl_uvregression(
signs_table32[c('Presence of anaemia', 'Total CD4 count', 'log10 viral load', 'Or, HIV viral load = LDL (choice=LDL)', 'Current tuberculosis', 'Past tuberculosis', 'Sodium', 'Potassium', 'Urea', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
signs_table42 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(
`Full blood count (FBC) result available` = as.factor(`Full blood count (FBC) result available`),
`Differential on FBC available` = as.factor(`Differential on FBC available`),
`Aetiology of anaemia` = as.factor(`Aetiology of anaemia`)
) %>%
dplyr::select(Creatinine, `Full blood count (FBC) result available`, Haemoglobin, `White cell count`, Platelets, MCV, `Differential on FBC available`, Neutrophils, `Lymphocyte count`, Eosinophils, Basophils, `Aetiology of anaemia`, outcome_advanced_HIV) %>% #, `Other, specify...112`
tbl_uvregression(
signs_table42[c('Creatinine', 'Full blood count (FBC) result available', 'Haemoglobin', 'White cell count', 'Platelets', 'MCV', 'Differential on FBC available', 'Neutrophils', 'Lymphocyte count', 'Eosinophils', 'Basophils', 'Aetiology of anaemia', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
signs_table42 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(
`Full blood count (FBC) result available` = as.factor(`Full blood count (FBC) result available`),
`Differential on FBC available` = as.factor(`Differential on FBC available`),
`Aetiology of anaemia` = as.factor(`Aetiology of anaemia`)
) %>%
dplyr::select(Creatinine, `Full blood count (FBC) result available`, Haemoglobin, `White cell count`, Platelets, MCV, `Differential on FBC available`, Neutrophils, `Lymphocyte count`, Eosinophils, Basophils, `Aetiology of anaemia`, outcome_advanced_HIV)
tbl_uvregression(
signs_table42[c('Creatinine', 'Full blood count (FBC) result available', 'Haemoglobin', 'White cell count', 'Platelets', 'MCV', 'Differential on FBC available', 'Neutrophils', 'Lymphocyte count', 'Eosinophils', 'Basophils', 'Aetiology of anaemia', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
ctscan2 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(`CT scan done` = as.factor(`CT scan done`),
Nodularity = as.factor(Nodularity),
`Bilateral adrenal enlargement` = as.factor(`Bilateral adrenal enlargement`),
`Calcification` = as.factor(`Calcification`),
Atrophy = as.factor(Atrophy),
Haemorrhage = as.factor(Haemorrhage),
`Outcome of hospitalization` = as.factor(`Outcome of hospitalization`)) %>%
dplyr::select(`CT scan done`, `Bilateral adrenal enlargement`, `Calcification`, Atrophy, Haemorrhage, Nodularity, `Outcome of hospitalization`, outcome_advanced_HIV)
tbl_uvregression(
ctscan2[c('CT scan done', 'Bilateral adrenal enlargement', 'Calcification', 'Atrophy', 'Haemorrhage', 'Nodularity', 'Outcome of hospitalization', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
tbl_uvregression(
ctscan2[c(#'CT scan done',
'Bilateral adrenal enlargement', 'Calcification', 'Atrophy', 'Haemorrhage', 'Nodularity', 'Outcome of hospitalization', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
tbl_uvregression(
ctscan2[c(#'CT scan done',
# 'Bilateral adrenal enlargement',
'Calcification', 'Atrophy', 'Haemorrhage', 'Nodularity', 'Outcome of hospitalization', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
tbl_uvregression(
ctscan2[c(#'CT scan done',
# 'Bilateral adrenal enlargement',
# 'Calcification',
'Atrophy', 'Haemorrhage', 'Nodularity', 'Outcome of hospitalization', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
View(ctscan2)
tbl_uvregression(
ctscan2[c(#'CT scan done',
# 'Bilateral adrenal enlargement',
# 'Calcification',
# 'Atrophy',
# 'Haemorrhage', 'Nodularity',
'Outcome of hospitalization', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
follow_up2 <- final_dataset %>%
mutate(outcome_advanced_HIV = ifelse(outcome==1 & `CD4 < 100`==1 & `Oral or inhaled steroids in the last three months`=='No', 1, 0)) %>%
mutate(`3 followup_done` = as.factor(`3 followup_done`),
`3 followup_patientstatus` = as.factor(`3 followup_patientstatus`),
`3 followup_patientcondition` = as.factor(`3 followup_patientcondition`),
`6 followup_done` = as.factor(`6 followup_done`),
`6 followup_patientstatus` = as.factor(`6 followup_patientstatus`),
`6 followup_patientcondition` = as.factor(`6 followup_patientcondition`),
`12 followup_done` = as.factor(`12 followup_done`),
`12 followup_patientstatus` = as.factor(`12 followup_patientstatus`),
`12 followup_patientcondition` = as.factor(`12 followup_patientcondition`),
`If deceased, cause of death` = as.factor(`If deceased, cause of death`)
) %>%
dplyr::select(`3 followup_done`, `3 followup_patientstatus`, `3 followup_patientcondition`, `6 followup_done`, `6 followup_patientstatus`, `6 followup_patientcondition`, `12 followup_done`, `12 followup_patientstatus`, `12 followup_patientcondition`, `If deceased, cause of death`, outcome_advanced_HIV)
tbl_uvregression(
follow_up2[c('3 followup_done', '3 followup_patientstatus', '3 followup_patientcondition', '6 followup_done', '6 followup_patientstatus', '6 followup_patientcondition', '12 followup_done', '12 followup_patientstatus', '12 followup_patientcondition', 'If deceased, cause of death', 'outcome_advanced_HIV')],
method = glm,
y = outcome_advanced_HIV,
method.args = list(family = binomial),
exponentiate = TRUE
)
