library(gtsummary)
library(gtsummary)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(cache=TRUE)
knitr::opts_chunk$set(fig.pos = 'H')
knitr::opts_chunk$set(results = 'asis')
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(message = FALSE)
library(tidyverse)
library(magrittr)
library(knitr)
library(kableExtra)
library(tinytex)
library(gmodels)
library(readxl)
# library(MASS)
library(gtsummary)
library(gtsummary)
library(Rcpp)
# library(MASS)
library(gtsummary)
if (packageVersion("devtools") < 1.6) {
install.packages("devtools")
}
devtools::install_github("hadley/lazyeval")
devtools::install_github("hadley/dplyr")
detach("package:dplyr", unload = TRUE)
if (packageVersion("devtools") < 1.6) {
install.packages("devtools")
}
devtools::install_github("hadley/lazyeval")
devtools::install_github("hadley/dplyr")
if (packageVersion("devtools") < 1.6) {
install.packages("devtools")
}
devtools::install_github("hadley/lazyeval")
devtools::install_github("hadley/dplyr")
library(gtsummary)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(cache=TRUE)
knitr::opts_chunk$set(fig.pos = 'H')
knitr::opts_chunk$set(results = 'asis')
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(message = FALSE)
library(tidyverse)
library(magrittr)
library(knitr)
library(kableExtra)
library(tinytex)
library(gmodels)
library(readxl)
# library(MASS)
library(gtsummary)
final_dataset <- read_csv("final_dataset.csv", show_col_types = F) %>%
mutate(outcome = ifelse(`Random cortisol result` < 500 & (`Synacthen: 30 minute cortisol result`< 550 & `ACTH result`> 13.9), 1, 0)) #%>%
dat <- final_dataset %>%
select(`Hospital folder number`,`Random cortisol result`, `ACTH sample drawn`, `ACTH result`, `Synacthen: 0 minute cortisol result`, `Synacthen: 30 minute cortisol result`, outcome)
# write.csv(dat, 'outcome_dat.csv')
View(final_dataset)
final_dataset <- read_csv("final_dataset.csv", show_col_types = F) %>%
mutate(outcome = ifelse(`Random cortisol result` < 500 & (`Synacthen: 30 minute cortisol result`< 550 & `ACTH result`> 13.9), 1, 0)) %>%
select(`Hospital folder number`,`Random cortisol result`, `ACTH sample drawn`, `ACTH result`, `Synacthen: 0 minute cortisol result`, `Synacthen: 30 minute cortisol result`, outcome)
tbl_summary(dt04) <- final_dataset %>%
dplyr::select(Gender, Ethnicity)
dt04 <- final_dataset %>%
dplyr::select(Gender, Ethnicity)
names(final_dataset)
final_dataset <- read_csv("final_dataset.csv", show_col_types = F) %>%
mutate(outcome = ifelse(`Random cortisol result` < 500 & (`Synacthen: 30 minute cortisol result`< 550 & `ACTH result`> 13.9), 1, 0)) #%>%
tbl_summary(dt04) <- final_dataset %>%
dt04 <- final_dataset %>%
dplyr::select(Gender, Ethnicity)
tbl_summary(dt04) <- final_dataset %>%
dplyr::select(Gender, Ethnicity)
dt04 <- final_dataset %>%
dplyr::select(Gender, Ethnicity)
tbl_summary(dt04)
names(final_dataset)
socio_demographics <- final_dataset %>%
mutate(age = as.Date(`Date of birth`) - as.Date(`Date of enrolment in study`)) %>%
dplyr::select(age, Gender, Ethnicity)
socio_demographics <- final_dataset %>%
# mutate(age = as.Date(`Date of birth`) - as.Date(`Date of enrolment in study`)) %>%
dplyr::select(`Age at enrolment`, Gender, Ethnicity)
tbl_summary(socio_demographics)
clinical <- final_dataset %>%
dplyr::select(`HIV-positive, confirmed on ELISA`, `Total CD4 count...9`, `CD4 < 100`, `Opportunistic infection present`, `Oral or inhaled steroids in the last three months`)
tbl_summary(clinical)
clinical <- final_dataset %>%
mutate(days_since_employment = as.Date(`Date of enrolment in study`)- as.Date(`Last Employment date`))
dt04 <- data.frame(`Primary medical conditions` = c(
final_dataset$`Primary medical conditions (1)`,
final_dataset$`Primary medical conditions (2)`,
final_dataset$`Primary medical conditions (3)`,
final_dataset$`Primary medical conditions (4)`,
final_dataset$`Primary medical conditions (5)`,
final_dataset$`Primary medical conditions (6)`,
final_dataset$`Primary medical conditions (7)`,
final_dataset$`Primary medical conditions (8)`,
final_dataset$`Primary medical conditions (9)`,
final_dataset$`Primary medical conditions (10)`
))
styler:::style_selection()
dt04 <- data.frame(`Primary medical conditions` = c(
final_dataset$`Primary medical conditions (1)`,
final_dataset$`Primary medical conditions (2)`,
final_dataset$`Primary medical conditions (3)`,
final_dataset$`Primary medical conditions (4)`,
final_dataset$`Primary medical conditions (5)`,
final_dataset$`Primary medical conditions (6)`,
final_dataset$`Primary medical conditions (7)`,
final_dataset$`Primary medical conditions (8)`,
final_dataset$`Primary medical conditions (9)`,
final_dataset$`Primary medical conditions (10)`
)) %>%
filter(!is.na(`Primary medical conditions`))
dt04 <- data.frame(`Primary medical conditions` = c(
final_dataset$`Primary medical conditions (1)`,
final_dataset$`Primary medical conditions (2)`,
final_dataset$`Primary medical conditions (3)`,
final_dataset$`Primary medical conditions (4)`,
final_dataset$`Primary medical conditions (5)`,
final_dataset$`Primary medical conditions (6)`,
final_dataset$`Primary medical conditions (7)`,
final_dataset$`Primary medical conditions (8)`,
final_dataset$`Primary medical conditions (9)`,
final_dataset$`Primary medical conditions (10)`
)) %>%
dplyr::filter(!is.na(`Primary medical conditions`))
dt04 <- data.frame(`Primary medical conditions` = c(
final_dataset$`Primary medical conditions (1)`,
final_dataset$`Primary medical conditions (2)`,
final_dataset$`Primary medical conditions (3)`,
final_dataset$`Primary medical conditions (4)`,
final_dataset$`Primary medical conditions (5)`,
final_dataset$`Primary medical conditions (6)`,
final_dataset$`Primary medical conditions (7)`,
final_dataset$`Primary medical conditions (8)`,
final_dataset$`Primary medical conditions (9)`,
final_dataset$`Primary medical conditions (10)`
)) #%>%
dt05 <- data.frame(`Co-existing medical conditions` = c(
final_dataset$`Co-existing medical conditions (1)`,
final_dataset$`Co-existing medical conditions (2)`,
final_dataset$`Co-existing medical conditions (3)`,
final_dataset$`Co-existing medical conditions (4)`,
final_dataset$`Co-existing medical conditions (5)`,
final_dataset$`Co-existing medical conditions (6)`,
final_dataset$`Co-existing medical conditions (7)`,
final_dataset$`Co-existing medical conditions (8)`,
final_dataset$`Co-existing medical conditions (9)`,
final_dataset$`Co-existing medical conditions (10)`
)) #%>%
dt06 <- cbind(dt04, dt05)
View(dt06)
tbl_summary(dt06)
summary(final_dataset$Random cortisol result)
summary(final_dataset$`Random cortisol result`)
summary(final_dataset$`ACTH result`)
signs_table1 <- final_dataset %>%
mutate(`log10 viral load` = log(`HIV viral load`, 10))
unlink("analysis_file_cache", recursive = TRUE)
table1 <- tbl_summary(socio_demographics, by = outcome, missing = "no") %>%
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
socio_demographics <- final_dataset %>%
dplyr::select(`Age at enrolment`, Gender, Ethnicity)
table1 <- tbl_summary(socio_demographics, by = outcome, missing = "no") %>%
add_p() %>%
add_n() %>%
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
socio_demographics <- final_dataset %>%
dplyr::select(`Age at enrolment`, Gender, Ethnicity) %>%
tbl_summary(by = outcome, missing = "no") %>%
add_p() %>%
add_n() %>%
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
socio_demographics <- final_dataset %>%
dplyr::select(`Age at enrolment`, Gender, Ethnicity) %>%
tbl_summary(by = outcome)
socio_demographics <- final_dataset %>%
dplyr::select(`Age at enrolment`) %>%
tbl_summary(by = outcome) #, missing = "no") %>%
tbl_summary_ex2 <-
trial %>%
select(age, grade, response, trt) %>%
tbl_summary(
by = trt,
label = list(age ~ "Patient Age"),
statistic = list(all_continuous() ~ "{mean} ({sd})"),
digits = list(age ~ c(0, 1))
)
View(tbl_summary_ex2)
tbl_summary_ex2
socio_demographics <- final_dataset %>%
dplyr::select(`Age at enrolment`, Gender, Ethnicity, outcome) %>%
tbl_summary(by = outcome) #, missing = "no") %>%
socio_demographics <- final_dataset %>%
dplyr::select(`Age at enrolment`, Gender, Ethnicity, outcome) %>%
tbl_summary(by = outcome) %>% #, missing = "no") %>%
add_p() %>%
add_n() %>%
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
socio_demographics
socio_demographics
unlink("analysis_file_cache", recursive = TRUE)
dt05 <- final_dataset %>%
dplyr::select(`Hospital folder number`, `Primary medical conditions (1)`, `Primary medical conditions (2)`, `Primary medical conditions (3)`, `Primary medical conditions (4)`, `Primary medical conditions (5)`, `Primary medical conditions (6)`, `Primary medical conditions (7)`, `Primary medical conditions (8)`, `Primary medical conditions (9)`, `Primary medical conditions (10)`) %>%
pivot_longer(cols = `Primary medical conditions (1)`: `Primary medical conditions (10)`,
names_to = y,
names_prefix = `con`,
values_to = `Primary medical conditions`)
dt05 <- final_dataset %>%
dplyr::select(`Hospital folder number`, `Primary medical conditions (1)`, `Primary medical conditions (2)`, `Primary medical conditions (3)`, `Primary medical conditions (4)`, `Primary medical conditions (5)`, `Primary medical conditions (6)`, `Primary medical conditions (7)`, `Primary medical conditions (8)`, `Primary medical conditions (9)`, `Primary medical conditions (10)`) %>%
pivot_longer(cols = `Primary medical conditions (1)`: `Primary medical conditions (10)`,
names_to = y,
names_prefix = `Primary medical conditions`,
values_to = `Primary medical conditions con`)
dt05 <- data.frame(`Primary medical conditions` = c(
final_dataset$`Primary medical conditions (1)`,
final_dataset$`Primary medical conditions (2)`,
final_dataset$`Primary medical conditions (3)`,
final_dataset$`Primary medical conditions (4)`,
final_dataset$`Primary medical conditions (5)`,
final_dataset$`Primary medical conditions (6)`,
final_dataset$`Primary medical conditions (7)`,
final_dataset$`Primary medical conditions (8)`,
final_dataset$`Primary medical conditions (9)`,
final_dataset$`Primary medical conditions (10)`
)) %>%
mutate(id = rep(final_dataset$`Hospital folder number`, 10))
View(dt05)
dt05 <- data.frame(`Primary medical conditions` = c(
final_dataset$`Primary medical conditions (1)`,
final_dataset$`Primary medical conditions (2)`,
final_dataset$`Primary medical conditions (3)`,
final_dataset$`Primary medical conditions (4)`,
final_dataset$`Primary medical conditions (5)`,
final_dataset$`Primary medical conditions (6)`,
final_dataset$`Primary medical conditions (7)`,
final_dataset$`Primary medical conditions (8)`,
final_dataset$`Primary medical conditions (9)`,
final_dataset$`Primary medical conditions (10)`
)) %>%
mutate(id = rep(final_dataset$`Hospital folder number`, 10))
dt06 <- data.frame(`Co-existing medical conditions` = c(
final_dataset$`Co-existing medical conditions (1)`,
final_dataset$`Co-existing medical conditions (2)`,
final_dataset$`Co-existing medical conditions (3)`,
final_dataset$`Co-existing medical conditions (4)`,
final_dataset$`Co-existing medical conditions (5)`,
final_dataset$`Co-existing medical conditions (6)`,
final_dataset$`Co-existing medical conditions (7)`,
final_dataset$`Co-existing medical conditions (8)`,
final_dataset$`Co-existing medical conditions (9)`,
final_dataset$`Co-existing medical conditions (10)`
)) %>%
mutate(id = rep(final_dataset$`Hospital folder number`, 10))
dt07 <- data.frame(`Concomitant therapy` = c(
final_dataset$`Concomitant therapy (1)`,
final_dataset$`Concomitant therapy (2)`,
final_dataset$`Concomitant therapy (3)`,
final_dataset$`Concomitant therapy (4)`,
final_dataset$`Concomitant therapy (5)`,
final_dataset$`Concomitant therapy (6)`,
final_dataset$`Concomitant therapy (7)`,
final_dataset$`Concomitant therapy (8)`,
final_dataset$`Concomitant therapy (9)`,
final_dataset$`Concomitant therapy (10)`
)) %>%
mutate(id = rep(final_dataset$`Hospital folder number`, 10))
dt08 <- final_dataset %>%
dplyr::select(`Hospital folder number`, outcome)
dt07 <- cbind(dt05, dt06, dt07) %>%
left_join(dt08, by = `Hospital folder number`)
dt08 <- final_dataset %>%
mutate(id = final_dataset$`Hospital folder number`)
dt08 <- final_dataset %>%
mutate(id = final_dataset$`Hospital folder number`)
dt08 <- final_dataset %>%
mutate(id = final_dataset$`Hospital folder number`) %>%
dplyr::select(id, outcome)
dt07 <- cbind(dt05, dt06, dt07) %>%
left_join(dt08, by = 'id')
dt07 <- cbind(dt05, dt06, dt07) %>%
left_join(dt08, by = c('id'))
dt07 <- cbind(dt05, dt06, dt07)
View(dt07)
dt07 <- rbind(dt05, dt06, dt07)
names(dt07)
dt05 <- data.frame(`Primary medical conditions` = c(
final_dataset$`Primary medical conditions (1)`,
final_dataset$`Primary medical conditions (2)`,
final_dataset$`Primary medical conditions (3)`,
final_dataset$`Primary medical conditions (4)`,
final_dataset$`Primary medical conditions (5)`,
final_dataset$`Primary medical conditions (6)`,
final_dataset$`Primary medical conditions (7)`,
final_dataset$`Primary medical conditions (8)`,
final_dataset$`Primary medical conditions (9)`,
final_dataset$`Primary medical conditions (10)`
)) %>%
mutate(id = rep(final_dataset$`Hospital folder number`, 10))
dt06 <- data.frame(`Co-existing medical conditions` = c(
final_dataset$`Co-existing medical conditions (1)`,
final_dataset$`Co-existing medical conditions (2)`,
final_dataset$`Co-existing medical conditions (3)`,
final_dataset$`Co-existing medical conditions (4)`,
final_dataset$`Co-existing medical conditions (5)`,
final_dataset$`Co-existing medical conditions (6)`,
final_dataset$`Co-existing medical conditions (7)`,
final_dataset$`Co-existing medical conditions (8)`,
final_dataset$`Co-existing medical conditions (9)`,
final_dataset$`Co-existing medical conditions (10)`
)) %>%
mutate(id1 = rep(final_dataset$`Hospital folder number`, 10))
dt07 <- data.frame(`Concomitant therapy` = c(
final_dataset$`Concomitant therapy (1)`,
final_dataset$`Concomitant therapy (2)`,
final_dataset$`Concomitant therapy (3)`,
final_dataset$`Concomitant therapy (4)`,
final_dataset$`Concomitant therapy (5)`,
final_dataset$`Concomitant therapy (6)`,
final_dataset$`Concomitant therapy (7)`,
final_dataset$`Concomitant therapy (8)`,
final_dataset$`Concomitant therapy (9)`,
final_dataset$`Concomitant therapy (10)`
)) %>%
mutate(id2 = rep(final_dataset$`Hospital folder number`, 10))
dt08 <- final_dataset %>%
mutate(id = final_dataset$`Hospital folder number`) %>%
dplyr::select(id, outcome)
View(dt08)
dt09 <- rbind(dt05, dt06, dt07, dt08)
t09 <- cbind(dt05, dt06, dt07, dt08)
names(t09)
View(t09)
dt09 <- cbind(dt05, dt06, dt07, dt08) %>%
dplyr::select(id, Primary.medical.conditions, Co.existing.medical.conditions, Concomitant.therapy)
dt09 <- cbind(dt05, dt06, dt07, dt08) %>%
dplyr::select(id, `Primary.medical.conditions`, `Co.existing.medical.conditions`, `Concomitant.therapy`)
View(t09)
dt09 <- cbind(dt05, dt06, dt07) %>%
dplyr::select(id, `Primary.medical.conditions`, `Co.existing.medical.conditions`, `Concomitant.therapy`)
dt09 <- cbind(dt05, dt06, dt07) %>%
dplyr::select(id, `Primary.medical.conditions`, `Co.existing.medical.conditions`, `Concomitant.therapy`) %>%
left_join(dt08, by = c('id'))
View(dt09)
socio_demographics <- final_dataset %>%
dplyr::select(`Age at enrolment`, Gender, Ethnicity, outcome) %>%
tbl_summary(by = outcome, missing = "no") %>% #) %>%
add_p() %>%
add_n() %>%
modify_header(label = "Variable") %>% # update the column header
bold_labels()
socio_demographics
dt05 <- data.frame(`Primary medical conditions` = c(
final_dataset$`Primary medical conditions (1)`,
final_dataset$`Primary medical conditions (2)`,
final_dataset$`Primary medical conditions (3)`,
final_dataset$`Primary medical conditions (4)`,
final_dataset$`Primary medical conditions (5)`,
final_dataset$`Primary medical conditions (6)`,
final_dataset$`Primary medical conditions (7)`,
final_dataset$`Primary medical conditions (8)`,
final_dataset$`Primary medical conditions (9)`,
final_dataset$`Primary medical conditions (10)`
)) %>%
mutate(id = rep(final_dataset$`Hospital folder number`, 10))
# dplyr::filter(!is.na(`Primary medical conditions`))
dt06 <- data.frame(`Co-existing medical conditions` = c(
final_dataset$`Co-existing medical conditions (1)`,
final_dataset$`Co-existing medical conditions (2)`,
final_dataset$`Co-existing medical conditions (3)`,
final_dataset$`Co-existing medical conditions (4)`,
final_dataset$`Co-existing medical conditions (5)`,
final_dataset$`Co-existing medical conditions (6)`,
final_dataset$`Co-existing medical conditions (7)`,
final_dataset$`Co-existing medical conditions (8)`,
final_dataset$`Co-existing medical conditions (9)`,
final_dataset$`Co-existing medical conditions (10)`
)) %>%
mutate(id1 = rep(final_dataset$`Hospital folder number`, 10))
dt07 <- data.frame(`Concomitant therapy` = c(
final_dataset$`Concomitant therapy (1)`,
final_dataset$`Concomitant therapy (2)`,
final_dataset$`Concomitant therapy (3)`,
final_dataset$`Concomitant therapy (4)`,
final_dataset$`Concomitant therapy (5)`,
final_dataset$`Concomitant therapy (6)`,
final_dataset$`Concomitant therapy (7)`,
final_dataset$`Concomitant therapy (8)`,
final_dataset$`Concomitant therapy (9)`,
final_dataset$`Concomitant therapy (10)`
)) %>%
mutate(id2 = rep(final_dataset$`Hospital folder number`, 10))
dt08 <- final_dataset %>%
mutate(id = final_dataset$`Hospital folder number`) %>%
dplyr::select(id, outcome)
dt09 <- cbind(dt05, dt06, dt07) %>%
dplyr::select(id, `Primary.medical.conditions`, `Co.existing.medical.conditions`, `Concomitant.therapy`) %>%
left_join(dt08, by = c('id')) %>%
dplyr::select(`Primary.medical.conditions`, `Co.existing.medical.conditions`, `Concomitant.therapy`, outcome) %>%
tbl_summary(#missing = "no",
by = outcome,
label = list(`Primary.medical.conditions` ~ 'Primary medical conditions',
`Co.existing.medical.conditions`~ 'Co existing medical conditions',
`Concomitant.therapy` ~ 'Concomitant therapy'
)
) %>%
modify_header(label = "Variable") %>% # update the column header
bold_labels()
dt09
clinical <- final_dataset %>%
mutate(`days since employment` = as.Date(`Date of enrolment in study`)- as.Date(`Last Employment date`)) %>%
dplyr::select(`HIV-positive, confirmed on ELISA`, `Total CD4 count...9`, `CD4 < 100`, `Opportunistic infection present`, `Oral or inhaled steroids in the last three months`, `days since employment`, `Duration of current illness`, outcome) %>%
tbl_summary(#clinical,
missing = "no",
by = outcome,
label = list(`Total CD4 count...9` ~ 'Total CD4 count')) %>%
modify_header(label = "Variable") %>% # update the column header
bold_labels()
clinical
opportunistic_infections <- final_dataset %>%
dplyr::select(`Opportunistic infection  (choice=Tuberculosis)`, `Opportunistic infection  (choice=Cryptococcus neoformans)`, `Opportunistic infection  (choice=Toxoplasmosis)`, `Opportunistic infection  (choice=Mycobacterium avium-intracellulare)`, `Opportunistic infection  (choice=Kaposis sarcoma)`, `Opportunistic infection  (choice=Cytomegalovirus)`, `Opportunistic infection  (choice=Other)`, outcome) %>% #, `Other, specify...67`
tbl_summary(#opportunistic_infections,
missing = "no",
by = outcome,
label = list(`Opportunistic infection  (choice=Tuberculosis)` ~ 'Tuberculosis'),
`Opportunistic infection (choice=Cryptococcus neoformans)` ~ 'Cryptococcus neoformans',
`Opportunistic infection (choice=Toxoplasmosis)` ~ 'Toxoplasmosis',
`Opportunistic infection (choice=Mycobacterium avium-intracellulare` ~ 'Mycobacterium avium-intracellulare',
`Opportunistic infection (choice=Kaposis sarcoma)` ~ 'Kaposis sarcoma',
`Opportunistic infection (choice=Cytomegalovirus)` ~ 'Cytomegalovirus',
`Opportunistic infection (choice=Other)` ~ 'Other') %>%
modify_header(label = "Variable") %>% # update the column header
bold_labels()
str(final_dataset)
str(final_dataset)
str(final_dataset[100:184])
signs_table1 <- final_dataset %>%
mutate(#`log10 viral load` = log(`HIV viral load`, 10),
Hypotension = as.factor(Hypotension),
Weakness = as.factor(Weakness),
Tiredness = as.factor(Tiredness),
`Poor appetite` = as.factor(`Poor appetite`),
`Weight loss` = as.factor(`Weight loss`),
`Increased pigmentation of the skin` = as.factor(`Increased pigmentation of the skin`),
Nausea = as.factor(Nausea)
) %>%
dplyr::select(`log10 viral load`, `BP (systolic)`, `BP (diastolic)`, `Heart rate`, Hypotension, Weakness, Tiredness, `Poor appetite`, `Weight loss`, `Increased pigmentation of the skin`, Nausea, outcome) %>%
tbl_summary(#signs_table1,
missing = "no",
by = outcome) %>%
modify_header(label = "Variable") %>% # update the column header
bold_labels()
follow_up <- final_dataset %>%
mutate(`3 followup_done` = as.factor(`3 followup_done`),
`3 followup_patientstatus` = as.factor(`3 followup_patientstatus`),
`3 followup_patientcondition` = as.factor(`3 followup_patientcondition`),
`6 followup_done` = as.factor(`6 followup_done`),
`6 followup_patientstatus` = as.factor(`6 followup_patientstatus`),
`6 followup_patientcondition` = as.factor(`6 followup_patientcondition`),
`12 followup_done` = as.factor(`12 followup_done`),
`12 followup_patientstatus` = as.factor(`12 followup_patientstatus`),
`12 followup_patientcondition` = as.factor(`12 followup_patientcondition`),
`If deceased, cause of death` = as.factor(`If deceased, cause of death`)
) %>%
dplyr::select( `3 followup_done`, `3 followup_patientstatus`, `3 followup_patientcondition`, `6 followup_done`, `6 followup_patientstatus`, `6 followup_patientcondition`, `12 followup_done`, `12 followup_patientstatus`, `12 followup_patientcondition`, `If deceased, cause of death`, outcome)
tbl_summary(#follow_up,
missing = "no",
by = outcome) %>%
modify_header(label = "Variable") %>% # update the column header
bold_labels()
opportunistic_infections <- final_dataset %>%
mutate(
`Opportunistic infection  (choice=Tuberculosis)` = as.factor(`Opportunistic infection  (choice=Tuberculosis)`),
`Opportunistic infection  (choice=Cryptococcus neoformans)` = as.factor(`Opportunistic infection  (choice=Cryptococcus neoformans)`),
`Opportunistic infection  (choice=Toxoplasmosis)` = as.factor(`Opportunistic infection  (choice=Toxoplasmosis)`),
`Opportunistic infection  (choice=Mycobacterium avium-intracellulare)` = as.factor(`Opportunistic infection  (choice=Mycobacterium avium-intracellulare)`),
`Opportunistic infection  (choice=Kaposis sarcoma)` = as.factor(`Opportunistic infection  (choice=Kaposis sarcoma)`),
`Opportunistic infection  (choice=Cytomegalovirus)` = as.factor(`Opportunistic infection  (choice=Cytomegalovirus)`),
`Opportunistic infection  (choice=Other)` = as.factor(`Opportunistic infection  (choice=Other)`)
) %>%
dplyr::select(`Opportunistic infection  (choice=Tuberculosis)`, `Opportunistic infection  (choice=Cryptococcus neoformans)`, `Opportunistic infection  (choice=Toxoplasmosis)`, `Opportunistic infection  (choice=Mycobacterium avium-intracellulare)`, `Opportunistic infection  (choice=Kaposis sarcoma)`, `Opportunistic infection  (choice=Cytomegalovirus)`, `Opportunistic infection  (choice=Other)`, outcome)
str(opportunistic_infections)
opportunistic_infections <- final_dataset %>%
mutate(
`Opportunistic infection  (choice=Tuberculosis)` = as.factor(`Opportunistic infection  (choice=Tuberculosis)`),
`Opportunistic infection  (choice=Cryptococcus neoformans)` = as.factor(`Opportunistic infection  (choice=Cryptococcus neoformans)`),
`Opportunistic infection  (choice=Toxoplasmosis)` = as.factor(`Opportunistic infection  (choice=Toxoplasmosis)`),
`Opportunistic infection  (choice=Mycobacterium avium-intracellulare)` = as.factor(`Opportunistic infection  (choice=Mycobacterium avium-intracellulare)`),
`Opportunistic infection  (choice=Kaposis sarcoma)` = as.factor(`Opportunistic infection  (choice=Kaposis sarcoma)`),
`Opportunistic infection  (choice=Cytomegalovirus)` = as.factor(`Opportunistic infection  (choice=Cytomegalovirus)`),
`Opportunistic infection  (choice=Other)` = as.factor(`Opportunistic infection  (choice=Other)`)
) %>%
dplyr::select(`Opportunistic infection  (choice=Tuberculosis)`, `Opportunistic infection  (choice=Cryptococcus neoformans)`, `Opportunistic infection  (choice=Toxoplasmosis)`, `Opportunistic infection  (choice=Mycobacterium avium-intracellulare)`, `Opportunistic infection  (choice=Kaposis sarcoma)`, `Opportunistic infection  (choice=Cytomegalovirus)`, `Opportunistic infection  (choice=Other)`, outcome) %>% #, `Other, specify...67`
tbl_summary(#opportunistic_infections,
missing = "no",
by = outcome,
label = list(`Opportunistic infection  (choice=Tuberculosis)` ~ 'Tuberculosis'),
`Opportunistic infection (choice=Cryptococcus neoformans)` ~ 'Cryptococcus neoformans',
`Opportunistic infection (choice=Toxoplasmosis)` ~ 'Toxoplasmosis',
`Opportunistic infection (choice=Mycobacterium avium-intracellulare` ~ 'Mycobacterium avium-intracellulare',
`Opportunistic infection (choice=Kaposis sarcoma)` ~ 'Kaposis sarcoma',
`Opportunistic infection (choice=Cytomegalovirus)` ~ 'Cytomegalovirus',
`Opportunistic infection (choice=Other)` ~ 'Other') %>%
modify_header(label = "Variable") %>% # update the column header
bold_labels()
